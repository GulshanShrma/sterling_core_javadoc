<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_341) on Sat Sep 30 23:22:52 IST 2023 -->
<title>YCPBaseAgent (IBM Corp. Dev core java docs)</title>
<meta name="date" content="2023-09-30">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="YCPBaseAgent (IBM Corp. Dev core java docs)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":6,"i2":10,"i3":10,"i4":10,"i5":10,"i6":9,"i7":10,"i8":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage"><b>IBM Sterling Selling And Fulfillment Foundation 10.0</b></div>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../../../com/yantra/ycp/japi/util/YCPBaseTaskAgent.html" title="class in com.yantra.ycp.japi.util"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?com/yantra/ycp/japi/util/YCPBaseAgent.html" target="_top">Frames</a></li>
<li><a href="YCPBaseAgent.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.yantra.ycp.japi.util</div>
<h2 title="Class YCPBaseAgent" class="title">Class YCPBaseAgent</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>com.yantra.ycp.agent.server.YCPAbstractAgent</li>
<li>
<ul class="inheritance">
<li>com.yantra.ycp.japi.util.YCPBaseAgent</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd>com.yantra.interop.util.YIFAgentCallback, com.yantra.ycp.agent.server.YCPAgent, com.yantra.ycp.agent.YCPAgentActions, com.yantra.ycp.agent.YCPAgentLiterals</dd>
</dl>
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><a href="../../../../../com/yantra/ycp/japi/util/YCPBaseTaskAgent.html" title="class in com.yantra.ycp.japi.util">YCPBaseTaskAgent</a></dd>
</dl>
<hr>
<br>
<pre>public abstract class <span class="typeNameLabel">YCPBaseAgent</span>
extends com.yantra.ycp.agent.server.YCPAbstractAgent</pre>
<div class="block">Custom agent base class.
 This abstract class needs to be subclassed for writing custom agents. Override getJobs and executeJob method and implement custom agent processing in these methods.
 <br><br> <b> Example:</b><br>
 <pre>
 package com.custom;
 import org.w3c.dom.*;
 import java.util.List;
 import com.yantra.yfs.japi.*;
 import com.yantra.ycp.japi.util.*;
 import com.yantra.shared.ycp.YFSContext;
public class MyCustomAgent extends YCPBaseAgent {
     public List getJobs(YFSEnvironment env, Document inXML, Document lastMessage) throws Exception {
         // Custom business logic to obtain jobs that need to processed.
         // Build a java.util.List object of org.w3c.dom.Document object.
         // lastMessage: is the last document returned in the previous call to getJobs.
         //              this will be null in the first call to getJobs.
         List aList = new ArrayList();
         // Obtain records/jobs to be processed from database and add
         // it to list. NumRecordsToBuffer value indicates the number of jobs
         // that should be returned in each call of getJobs.
         Document aDoc = new DocumentImpl();
         aList.add(aDoc);
         return aList;
     }
     public void executeJob(YFSEnvironment env, Document inXML) throws Exception {
         // Custom business logic to process a job obtained by the getJobs method.
         // process job, if failure throw exception, this job will be rolled back.
         // Note:- the input XML received by this method is the XML that is returned
         // via the list in the getJobs method.
     }
     public long getPendingJobCount(YFSEnvironment ctx, YFCElement criteriaElem){
         // Return the number of jobs pending for this agent. This information will be displayed
         // in the System Management UI. This method will also be called by the health monitor process
         // to alert if the pending job count exceeds the threshold configured.
         // The input to this method is the criteria element or the inxml that gets passed to the getJobs method.
         // Note:- If this method is not implemented, the health monitor does not raise any alerts.
     }
 }
 </pre>
 <BR>
 <B>Note:</B> <BR>
 <OL>
 <LI> The input XML document to the getJobs method contains the criteria values configured in the configurator for this agent criteria. <BR>
 For Example, If 2 parameters are configured in Configurator for a agent , CustomParameter1 and CustomParameter2 with value "A" and "B".
 These parameters would be provided to the getJobs in the form of a XML.
 The format of a input xml to getJobs is :<BR>
 <P>
     &lt;MessageXml Action="Get" DocumentParamsKey="" DocumentType="" ProcessType="" ProcessTypeKey="" TransactionId="" TransactionKey="" CustomParameter1="A" CustomParameter2="B" NumRecordsToBuffer="5000" &gt;
     &lt;MessageXml /&gt;
 </P>
 </LI>
 <LI> The last message document to the getJobs method contains the last message pushed into the queue in the previous execution of the getJobs.
 This parameter will empty when  getJobs method is called for the first time.
 <P>
     &lt;LastMessage /&gt;
 </P>
 </LI>
 <LI>The input XML document also contains a attribute NumRecordsToBuffer. This parameter indicates the number of records that
 should be returned from getJobs method. This parameter could also be configured via the configurator.
 If this parameter is not configured the Agent infrastructure defaults it to 5000. Use this attribute to obtain the specified number of jobs from the database and return it via the output list parameter of getJobs method.
 </LI>
 <LI>The input XML received by executeJob is the XML that is returned via the list in the getJobs method<BR>
 </LI>
 <LI>In the getJobs, executeJob method to obtain a API handle, use the getLocalApi() method. Do not use the getApi() method.<BR>
 For example: - <CODE>YIFApi oApi =  YIFClientFactory.getInstance().getLocalApi();</CODE>
 </LI>
 <LI><B>Setup required for running custom agents:</B><br>
 Setup a transaction in scenario modelling in configurator for each custom agent and
 configure a criteria-id for the transaction. Assign a server to the criteria.<BR><BR>
 Start the agent server assigned to the criteria-id of the transaction. This starts the required number of threads for the custom agent.<BR><BR>
 <B>agentserver.sh <I>server</I></B>
 Trigger the custom agent by invoking the triggeragent.sh script and pass the criteria-id configured:<BR>
 <B>triggeragent.sh <I>criteria-id</I></B>
 </LI>
 <LI>Ensure that com.custom.MyCustomAgent is in classpath.</LI>
 <LI>Ensure that a unique transaction id is created for each agent created and that you have configured a criteria-id for the transaction. Refer configuration guide for more information on transaction setup.</LI>
 </OL>
 <BR><BR></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<ul class="blockList">
<li class="blockList"><a name="fields.inherited.from.class.com.yantra.ycp.agent.YCPAgentActions">
<!--   -->
</a>
<h3>Fields inherited from interface&nbsp;com.yantra.ycp.agent.YCPAgentActions</h3>
<code>YCP_AGENT_ACTION_EXECUTE, YCP_AGENT_ACTION_GET, YCP_AGENT_ACTION_GET_AND_EXECUTE</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="fields.inherited.from.class.com.yantra.ycp.agent.YCPAgentLiterals">
<!--   -->
</a>
<h3>Fields inherited from interface&nbsp;com.yantra.ycp.agent.YCPAgentLiterals</h3>
<code>YCP_AGENT_ALLOWED_OVERRIDDEN_CRITERIA, YCP_AGENT_API_ACTION, YCP_AGENT_BATCH_JOBS, YCP_AGENT_DETAILS_ELEMENT_LITERAL, YCP_AGENT_ENTERPRISE_CODE, YCP_AGENT_IS_FLOW_BACK, YCP_AGENT_LAST_MESSAGE, YCP_AGENT_NUM_EXECUTE_CREATED, YCP_AGENT_NUM_EXECUTE_ERROR, YCP_AGENT_NUM_EXECUTE_SUCCESS, YCP_AGENT_NUM_EXECUTE_TASKS_TO_BUFFER, YCP_AGENT_NUM_GETJOBS_PROCESSED, YCP_AGENT_NUM_MESSAGES_CREATED, YCP_AGENT_NUM_MESSAGES_PROCESSED, YCP_AGENT_NUM_MESSAGES_PUSHED, YCP_AGENT_NUM_TASKS_ERRORED, YCP_AGENT_NUM_TASKS_EXECUTED, YCP_AGENT_PURGE_CODE, YCP_AGENT_PURGE_LEAD_DAYS, YCP_AGENT_PURGE_LIVE_RUN, YCP_AGENT_PURGE_ONLY_BLANK_ENTERPRISE_EXCEPTIONS, YCP_AGENT_QUERY_TIMEOUT, YCP_AGENT_RECS_PER_LOOP, YCP_AGENT_TRANSACTION_ID, YCP_ARG_CURRENT_THREAD, YCP_ARG_TOTAL_THREADS, YCP_LOCKED_OBJECT_TYPE_AGENT_CRITERIA, YCP_NEXT_TASK_Q_INTERVAL, YCP_PROGID, YCP_TASK_QUEUE_KEY, YCP_USERID</code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier</th>
<th class="colLast" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected </code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/yantra/ycp/japi/util/YCPBaseAgent.html#YCPBaseAgent--">YCPBaseAgent</a></span>()</code>
<div class="block">Constructs a new BaseAgent.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/yantra/ycp/japi/util/YCPBaseAgent.html#endTimer-java.lang.String-">endTimer</a></span>(java.lang.String&nbsp;timerName)</code>
<div class="block">Ends a timer started with a startTimer.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>abstract void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/yantra/ycp/japi/util/YCPBaseAgent.html#executeJob-com.yantra.yfs.japi.YFSEnvironment-org.w3c.dom.Document-">executeJob</a></span>(<a href="../../../../../com/yantra/yfs/japi/YFSEnvironment.html" title="interface in com.yantra.yfs.japi">YFSEnvironment</a>&nbsp;env,
          org.w3c.dom.Document&nbsp;inXML)</code>
<div class="block">Execute a job obtained by getJobs method.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>java.util.List</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/yantra/ycp/japi/util/YCPBaseAgent.html#getJobs-com.yantra.yfs.japi.YFSEnvironment-org.w3c.dom.Document-">getJobs</a></span>(<a href="../../../../../com/yantra/yfs/japi/YFSEnvironment.html" title="interface in com.yantra.yfs.japi">YFSEnvironment</a>&nbsp;env,
       org.w3c.dom.Document&nbsp;inXML)</code>
<div class="block">Obtain jobs that need to be executed.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>java.util.List</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/yantra/ycp/japi/util/YCPBaseAgent.html#getJobs-com.yantra.yfs.japi.YFSEnvironment-org.w3c.dom.Document-org.w3c.dom.Document-">getJobs</a></span>(<a href="../../../../../com/yantra/yfs/japi/YFSEnvironment.html" title="interface in com.yantra.yfs.japi">YFSEnvironment</a>&nbsp;env,
       org.w3c.dom.Document&nbsp;criteria,
       org.w3c.dom.Document&nbsp;lastMessageCreated)</code>
<div class="block">Obtain jobs that need to be executed.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/yantra/ycp/japi/util/YCPBaseAgent.html#handlePostRollback-com.yantra.yfs.japi.YFSEnvironment-org.w3c.dom.Document-">handlePostRollback</a></span>(<a href="../../../../../com/yantra/yfs/japi/YFSEnvironment.html" title="interface in com.yantra.yfs.japi">YFSEnvironment</a>&nbsp;env,
                  org.w3c.dom.Document&nbsp;inXML)</code>
<div class="block">Handle errors.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/yantra/ycp/japi/util/YCPBaseAgent.html#log-java.lang.String-java.lang.String-">log</a></span>(java.lang.String&nbsp;sClassNMethodName,
   java.lang.String&nbsp;aMessage)</code>
<div class="block">Log a trace message to log files.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/yantra/ycp/japi/util/YCPBaseAgent.html#main-java.lang.String:A-">main</a></span>(java.lang.String[]&nbsp;args)</code>
<div class="block">Main method.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/yantra/ycp/japi/util/YCPBaseAgent.html#run-java.util.Map-">run</a></span>(java.util.Map&nbsp;argBuf)</code>
<div class="block">Run method.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/yantra/ycp/japi/util/YCPBaseAgent.html#startTimer-java.lang.String-">startTimer</a></span>(java.lang.String&nbsp;timerName)</code>
<div class="block">Start a timer with the timer name specified.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.com.yantra.ycp.agent.server.YCPAbstractAgent">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;com.yantra.ycp.agent.server.YCPAbstractAgent</h3>
<code>appendRolloutVersion, appendRolloutVersionToQueryBuilder, appendRolloutVersionToQueryBuilder, appendRolloutVersionToQueryBuilder, appendRolloutVersionToQueryBuilder, getApiName, getLockParameters, getLockParameters, invokeAgentCompletedService, run, setCallbackProperties, setIsolationLevelForGetJobs</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="YCPBaseAgent--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>YCPBaseAgent</h4>
<pre>protected&nbsp;YCPBaseAgent()</pre>
<div class="block">Constructs a new BaseAgent.</div>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="main-java.lang.String:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>main</h4>
<pre>public static&nbsp;void&nbsp;main(java.lang.String[]&nbsp;args)</pre>
<div class="block">Main method. This method can be overridden to provide usage information for the custom agent.
 This method is invoked if agentrunner.cmd is invoked with -A"/?" option for help.
 args arguments</div>
</li>
</ul>
<a name="getJobs-com.yantra.yfs.japi.YFSEnvironment-org.w3c.dom.Document-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getJobs</h4>
<pre>public&nbsp;java.util.List&nbsp;getJobs(<a href="../../../../../com/yantra/yfs/japi/YFSEnvironment.html" title="interface in com.yantra.yfs.japi">YFSEnvironment</a>&nbsp;env,
                              org.w3c.dom.Document&nbsp;inXML)
                       throws java.lang.Exception</pre>
<div class="block">Obtain jobs that need to be executed. This method has to be implemented by the classes inheriting this Class.
 This method will have the logic of determining the jobs that need to be completed and return the
 jobs as a List of org.w3c.dom.Document objects.
 This method is invoked repeatedly till this method returns a null or a empty list. <BR>
 For each document in the list returned, the executeJob method will be invoked.
 env <B>YFSEnvironment</B> - Environment handle
 inXML <B>org.w3c.dom.Document</B> - Object containing the Job information.
 Exception Exception
 <B>java.util.List</B> -- List of org.w3c.dom.Document objects which can be passed on to the execute methods. This indicates a unit of work that needs to be completed.
 Use getJobs(YFSEnvironment,Document,Document)</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code></dd>
</dl>
</li>
</ul>
<a name="executeJob-com.yantra.yfs.japi.YFSEnvironment-org.w3c.dom.Document-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>executeJob</h4>
<pre>public abstract&nbsp;void&nbsp;executeJob(<a href="../../../../../com/yantra/yfs/japi/YFSEnvironment.html" title="interface in com.yantra.yfs.japi">YFSEnvironment</a>&nbsp;env,
                                org.w3c.dom.Document&nbsp;inXML)
                         throws java.lang.Exception</pre>
<div class="block">Execute a job obtained by getJobs method. This method has to implemented by the classes inheriting. This method executes a job
 (org.w3c.dom.Document) returned by the getJobs method.
 The environment passed to this method can be passed to Api's invoked via YIFApi interface.
 env <B>YFSEnvironment</B> - Environment handle
 inXML <B>org.w3c.dom.Document</B> -- Input Document.
 Exception Exception
 #getJobs(YFSEnvironment,Document)</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>executeJob</code>&nbsp;in class&nbsp;<code>com.yantra.ycp.agent.server.YCPAbstractAgent</code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code></dd>
</dl>
</li>
</ul>
<a name="getJobs-com.yantra.yfs.japi.YFSEnvironment-org.w3c.dom.Document-org.w3c.dom.Document-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getJobs</h4>
<pre>public&nbsp;java.util.List&nbsp;getJobs(<a href="../../../../../com/yantra/yfs/japi/YFSEnvironment.html" title="interface in com.yantra.yfs.japi">YFSEnvironment</a>&nbsp;env,
                              org.w3c.dom.Document&nbsp;criteria,
                              org.w3c.dom.Document&nbsp;lastMessageCreated)
                       throws java.lang.Exception</pre>
<div class="block">Obtain jobs that need to be executed. This method has to be implemented by the classes inheriting this Class.
 This method will have the logic of determining the jobs that need to be completed and return the
 jobs as a List of org.w3c.dom.Document objects.
 This method is invoked repeatedly till this method returns a null or a empty list. <BR>
 For each document in the list returned, the executeJob method will be invoked.
 env <B>YFSEnvironment</B> - Environment handle
 criteria <B>org.w3c.dom.Document</B> - Object containing the input criteria.
 lastMessageCreated <B>org.w3c.dom.Document</B> - Object containing the last XML populated by the previous run of the getJobs method.
 Exception Exception
 <B>java.util.List</B> -- List of org.w3c.dom.Document objects which can be passed on to the execute methods. This indicates a unit of work that needs to be completed.
 #executeJob(YFSEnvironment,Document)</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>getJobs</code>&nbsp;in class&nbsp;<code>com.yantra.ycp.agent.server.YCPAbstractAgent</code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code></dd>
</dl>
</li>
</ul>
<a name="run-java.util.Map-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>run</h4>
<pre>public final&nbsp;void&nbsp;run(java.util.Map&nbsp;argBuf)
               throws java.lang.Exception</pre>
<div class="block">Run method. This method is invoked by the Agent runner. This method contains logic to invoke the
 getJobs method and for each document returned (in the List), invoking the executeJob method.
 This method also ensures that each executeJob is a transaction i.e if executeJob throws a Exception,
 this method will rollback the transaction. If executeJob returned normally, then this method will
 commit the transaction.
 argBuf <B>java.util.Map</B> of arguments.
 Exception Exception thrown.
 as of 5.0 Sp1</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code></dd>
</dl>
</li>
</ul>
<a name="handlePostRollback-com.yantra.yfs.japi.YFSEnvironment-org.w3c.dom.Document-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>handlePostRollback</h4>
<pre>public&nbsp;void&nbsp;handlePostRollback(<a href="../../../../../com/yantra/yfs/japi/YFSEnvironment.html" title="interface in com.yantra.yfs.japi">YFSEnvironment</a>&nbsp;env,
                               org.w3c.dom.Document&nbsp;inXML)</pre>
<div class="block">Handle errors. If a exception is thrown from executeJob method, a rollback is performed on the db connection and this method is invoked. This provides custom agents to mark the job as in error or perform some similar error handling processing.
 env <B>YFSEnvironment</B> - Environment handle
 inXML <B>org.w3c.dom.Document</B> -- Input Document.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code>handlePostRollback</code>&nbsp;in class&nbsp;<code>com.yantra.ycp.agent.server.YCPAbstractAgent</code></dd>
</dl>
</li>
</ul>
<a name="log-java.lang.String-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>log</h4>
<pre>public final&nbsp;void&nbsp;log(java.lang.String&nbsp;sClassNMethodName,
                      java.lang.String&nbsp;aMessage)</pre>
<div class="block">Log a trace message to log files. This method logs the messages to System out if -traceon is passed to agentrunner.sh
 sClassNMethodName Class - Method where log is called.
 aMessage message to be logged.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code>log</code>&nbsp;in class&nbsp;<code>com.yantra.ycp.agent.server.YCPAbstractAgent</code></dd>
</dl>
</li>
</ul>
<a name="startTimer-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>startTimer</h4>
<pre>public final&nbsp;void&nbsp;startTimer(java.lang.String&nbsp;timerName)</pre>
<div class="block">Start a timer with the timer name specified. This starts collection of timing information for the timer.
 This method starts collection of timing information only if -timeron option is passed to agentrunner.sh
 timerName Timer name.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code>startTimer</code>&nbsp;in class&nbsp;<code>com.yantra.ycp.agent.server.YCPAbstractAgent</code></dd>
</dl>
</li>
</ul>
<a name="endTimer-java.lang.String-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>endTimer</h4>
<pre>public final&nbsp;void&nbsp;endTimer(java.lang.String&nbsp;timerName)</pre>
<div class="block">Ends a timer started with a startTimer. This method ends timing collection started for a timer name
 print the timing information using the configuration setup for timing.
 This method prints timing information only if -timeron option is passed to agentrunner.sh
 timerName Timer name.
 #startTimer(String)</div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code>endTimer</code>&nbsp;in class&nbsp;<code>com.yantra.ycp.agent.server.YCPAbstractAgent</code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage"><b>IBM Corp. Confidential</b></div>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../../../com/yantra/ycp/japi/util/YCPBaseTaskAgent.html" title="class in com.yantra.ycp.japi.util"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?com/yantra/ycp/japi/util/YCPBaseAgent.html" target="_top">Frames</a></li>
<li><a href="YCPBaseAgent.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small><font face='Verdana' size='1'>&#169; Copyright IBM Corp. 2001, 2013 All Rights Reserved. </font></small></p>
</body>
</html>
